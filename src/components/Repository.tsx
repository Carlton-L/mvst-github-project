import { formatDistanceToNow } from 'date-fns';

interface RepositoryProps {
  repository: any;
  user: string;
}

/**
 * Component which displays information about a single repository
 * @param {0} props Repository object and user login string
 * @returns
 */
const Repository = ({
  repository,
  user,
}: RepositoryProps): React.JSX.Element => {
  return (
    <li className="bg-grey-dark flex flex-col justify-start rounded-xl p-3 gap-2">
      <div>
        <a
          href={`https://github.com/${user}/${repository.node.name}`}
          className="text-primary font-bold text-xl flex flex-row gap-1 items-center truncate"
        >
          {`${repository.node.name} `}
          <svg
            width="16"
            height="17"
            viewBox="0 0 16 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.8234 2.38253C10.3036 2.38253 9.88203 1.96099 9.88203 1.44116C9.88203 0.921543 10.3036 0.5 10.8234 0.5H15.0588C15.5783 0.5 16 0.921943 16 1.44116V5.67681C16 6.19643 15.5785 6.61797 15.0588 6.61797C14.5392 6.61797 14.1177 6.19643 14.1177 5.67681V3.71321L8.66544 9.16544C8.29794 9.53274 7.70206 9.53274 7.33456 9.16544C6.96726 8.79794 6.96726 8.20206 7.33456 7.83456L12.7868 2.38253H10.8234ZM14.1177 9.44126C14.1177 8.92144 14.5392 8.5001 15.0588 8.5001C15.5785 8.5001 16 8.92144 16 9.44126V15.5588C16 16.0785 15.5785 16.5 15.0588 16.5H0.941165C0.421543 16.5 0 16.0785 0 15.5588V1.44116C0 0.921543 0.421543 0.5 0.941165 0.5H7.05874C7.57856 0.5 8.0001 0.921543 8.0001 1.44116C8.0001 1.96099 7.57856 2.38253 7.05874 2.38253H1.88253V14.6177H14.1177V9.44126Z"
              fill="#E6EDF3"
            />
          </svg>
        </a>
      </div>
      <div className="text-xs text-grey font-medium">
        {repository.node.description ? repository.node.description : ''}
      </div>
      <div className="text-xs text-grey font-medium flex flex-row flex-wrap gap-3">
        {repository.node.primaryLanguage ? (
          <div className="flex flex-row gap-1 items-center justify-center">
            <div
              className={`w-3 h-3 rounded-full`}
              style={{ backgroundColor: repository.node.primaryLanguage.color }}
            ></div>
            {repository.node.primaryLanguage.name}
          </div>
        ) : (
          ''
        )}
        <div className="flex flex-row gap-1 items-center justify-center">
          <svg
            width="12"
            height="13"
            viewBox="0 0 12 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.223273 5.8535L2.56983 8.14027L2.0135 11.3687C1.98939 11.5062 2.00439 11.6478 2.0568 11.7772C2.1092 11.9067 2.19691 12.0188 2.30993 12.1009C2.42295 12.1829 2.55674 12.2315 2.69606 12.2413C2.83537 12.251 2.97462 12.2214 3.09794 12.1558L5.99917 10.633L8.89874 12.1575C9.0223 12.223 9.16176 12.2525 9.30125 12.2426C9.44074 12.2328 9.57467 12.184 9.68782 12.1018C9.80096 12.0196 9.88878 11.9074 9.94129 11.7778C9.99379 11.6482 10.0089 11.5064 9.98484 11.3687L9.4285 8.14027L11.7751 5.8535C11.8746 5.75617 11.945 5.63296 11.9783 5.49777C12.0116 5.36257 12.0065 5.22076 11.9635 5.08833C11.9205 4.9559 11.8414 4.83811 11.735 4.74825C11.6286 4.65839 11.4993 4.60003 11.3616 4.57974L8.11822 4.1081L6.66345 1.172C6.60172 1.04698 6.50626 0.941723 6.38784 0.868125C6.26942 0.794527 6.13278 0.755524 5.99336 0.755524C5.85393 0.755524 5.71729 0.794527 5.59887 0.868125C5.48046 0.941723 5.38499 1.04698 5.32327 1.172L3.88012 4.1081L0.638447 4.57974C0.500697 4.60003 0.371354 4.65839 0.264999 4.74825C0.158645 4.83811 0.0795106 4.9559 0.036518 5.08833C-0.00647455 5.22076 -0.0116152 5.36257 0.0216758 5.49777C0.0549668 5.63296 0.125365 5.75617 0.224934 5.8535H0.223273ZM4.04287 4.92351C4.1628 4.90616 4.27671 4.8599 4.37479 4.78873C4.47286 4.71756 4.55216 4.62361 4.60585 4.51498L5.99917 1.68349L7.39415 4.50667C7.44784 4.61531 7.52714 4.70926 7.62521 4.78043C7.72329 4.8516 7.8372 4.89785 7.95713 4.9152L11.0759 5.36857L8.82235 7.5773C8.73528 7.66223 8.67025 7.76713 8.63292 7.88289C8.59559 7.99865 8.58707 8.12178 8.60812 8.24157L9.1412 11.3471L6.35124 9.88068C6.24395 9.82424 6.12455 9.79475 6.00332 9.79475C5.8821 9.79475 5.76269 9.82424 5.65541 9.88068L2.86212 11.3438L3.3952 8.23825C3.41625 8.11845 3.40773 7.99533 3.3704 7.87957C3.33307 7.76381 3.26804 7.65891 3.18097 7.57398L0.924086 5.37688L4.04287 4.92351Z"
              fill="#7E7E7E"
            />
          </svg>
          {repository.node.stargazerCount}
        </div>
        <div className="flex flex-row gap-1 items-center justify-center">
          <svg
            width="12"
            height="13"
            viewBox="0 0 12 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 2.60337C11.9989 2.04727 11.7776 1.51425 11.3843 1.12103C10.9911 0.727806 10.4581 0.506428 9.902 0.505371C7.376 0.575371 7.032 4.07937 9.466 4.65737C9.3845 5.06609 9.1637 5.43386 8.84127 5.69793C8.51884 5.96201 8.11477 6.10601 7.698 6.10537H4.298C3.88123 6.10601 3.47716 5.96201 3.15473 5.69793C2.8323 5.43386 2.6115 5.06609 2.53 4.65737C3.0013 4.55764 3.42416 4.29935 3.72807 3.92556C4.03197 3.55178 4.19854 3.08511 4.2 2.60337C4.084 -0.180629 0.116 -0.178629 0 2.60337C0.000653399 3.09533 0.174003 3.57144 0.489807 3.94865C0.805611 4.32586 1.24382 4.58022 1.728 4.66737C1.81526 5.288 2.12376 5.85622 2.59672 6.26744C3.06968 6.67867 3.67527 6.90521 4.302 6.90537H5.6V8.34737C5.12219 8.44095 4.69168 8.6975 4.38199 9.07321C4.07231 9.44892 3.90265 9.92048 3.902 10.4074C4.016 13.1914 7.984 13.1894 8.102 10.4074C8.10117 9.91992 7.93094 9.4479 7.62046 9.07212C7.30998 8.69633 6.87855 8.44013 6.4 8.34737V6.90537H7.698C8.32473 6.90521 8.93032 6.67867 9.40328 6.26744C9.87624 5.85622 10.1847 5.288 10.272 4.66737C10.7562 4.58022 11.1944 4.32586 11.5102 3.94865C11.826 3.57144 11.9993 3.09533 12 2.60337ZM0.8 2.60337C0.800529 2.25928 0.937452 1.92944 1.18076 1.68613C1.42407 1.44282 1.75391 1.3059 2.098 1.30537C3.818 1.36737 3.816 3.84137 2.098 3.90537C1.92728 3.90511 1.75829 3.87122 1.60066 3.80565C1.44304 3.74008 1.29988 3.6441 1.17935 3.5232C1.05882 3.40229 0.963279 3.25884 0.898191 3.10101C0.833102 2.94319 0.799737 2.77409 0.8 2.60337ZM7.298 10.4034C7.29826 10.5741 7.2649 10.7432 7.19981 10.901C7.13472 11.0588 7.03918 11.2023 6.91865 11.3232C6.79812 11.4441 6.65496 11.5401 6.49734 11.6056C6.33971 11.6712 6.17072 11.7051 6 11.7054C4.282 11.6434 4.282 9.16937 6 9.10537C6.17072 9.10563 6.33971 9.13952 6.49734 9.20509C6.65496 9.27067 6.79812 9.36664 6.91865 9.48755C7.03918 9.60845 7.13472 9.75191 7.19981 9.90973C7.2649 10.0676 7.29826 10.2367 7.298 10.4074V10.4034ZM9.902 3.90537C9.55738 3.90484 9.22703 3.76771 8.98335 3.52403C8.73966 3.28034 8.60253 2.94999 8.602 2.60537C8.664 0.887371 11.14 0.887371 11.202 2.60537C11.202 2.95015 11.065 3.28081 10.8212 3.52461C10.5774 3.76841 10.2468 3.90537 9.902 3.90537Z"
              fill="#7E7E7E"
            />
          </svg>
          {repository.node.forkCount}
        </div>
        {repository.node.licenseInfo ? (
          <div className="flex flex-row gap-1 items-center justify-center">
            <svg
              width="12"
              height="13"
              viewBox="0 0 12 13"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10.3498 9.592C10.3752 9.53958 10.3889 9.48224 10.3898 9.424V1.7C10.3927 1.54513 10.3651 1.39121 10.3084 1.24704C10.2518 1.10287 10.1673 0.97129 10.0598 0.859828C9.95223 0.748366 9.82377 0.659212 9.68175 0.597468C9.53973 0.535724 9.38692 0.502602 9.23209 0.5H2.15791C2.00308 0.502602 1.85027 0.535724 1.70825 0.597468C1.56623 0.659212 1.43777 0.748366 1.33024 0.859828C1.22271 0.97129 1.13821 1.10287 1.08158 1.24704C1.02494 1.39121 0.997295 1.54513 1.00021 1.7V11.3C0.997295 11.4549 1.02494 11.6088 1.08158 11.753C1.13821 11.8971 1.22271 12.0287 1.33024 12.1402C1.43777 12.2516 1.56623 12.3408 1.70825 12.4025C1.85027 12.4643 2.00308 12.4974 2.15791 12.5H7.44255C7.52409 12.4998 7.60363 12.4747 7.67049 12.428C7.69298 12.413 7.71377 12.3955 7.73248 12.376L10.2798 9.7C10.309 9.66817 10.3327 9.63166 10.3498 9.592ZM1.8 11.3V1.7C1.79703 1.65018 1.80396 1.60027 1.82037 1.55314C1.83679 1.50601 1.86237 1.4626 1.89564 1.42542C1.92892 1.38823 1.96922 1.358 2.01424 1.33647C2.05925 1.31495 2.10808 1.30255 2.15791 1.3H9.23209C9.28192 1.30255 9.33075 1.31495 9.37576 1.33647C9.42077 1.358 9.46108 1.38823 9.49436 1.42542C9.52763 1.4626 9.55321 1.50601 9.56963 1.55314C9.58604 1.60027 9.59297 1.65018 9.59 1.7V9.024H7.44255C7.33649 9.024 7.23478 9.06614 7.15978 9.14116C7.08479 9.21617 7.04265 9.31791 7.04265 9.424V11.7H2.15791C2.10808 11.6974 2.05925 11.6851 2.01424 11.6635C1.96922 11.642 1.92892 11.6118 1.89564 11.5746C1.86237 11.5374 1.83679 11.494 1.82037 11.4469C1.80396 11.3997 1.79703 11.3498 1.8 11.3ZM7.84245 11.1V9.824H9.05613L7.84245 11.1Z"
                fill="#7E7E7E"
              />
              <path
                d="M3.04569 3.18397H8.34433C8.45039 3.18397 8.55211 3.14183 8.6271 3.06681C8.7021 2.9918 8.74423 2.89006 8.74423 2.78397C8.74423 2.67789 8.7021 2.57614 8.6271 2.50113C8.55211 2.42611 8.45039 2.38397 8.34433 2.38397H3.04569C2.93964 2.38397 2.83792 2.42611 2.76292 2.50113C2.68793 2.57614 2.6458 2.67789 2.6458 2.78397C2.6458 2.89006 2.68793 2.9918 2.76292 3.06681C2.83792 3.14183 2.93964 3.18397 3.04569 3.18397Z"
                fill="#7E7E7E"
              />
              <path
                d="M3.04569 4.88398H8.34433C8.45039 4.88398 8.55211 4.84184 8.6271 4.76683C8.7021 4.69181 8.74423 4.59007 8.74423 4.48398C8.74423 4.3779 8.7021 4.27616 8.6271 4.20114C8.55211 4.12613 8.45039 4.08398 8.34433 4.08398H3.04569C2.93964 4.08398 2.83792 4.12613 2.76292 4.20114C2.68793 4.27616 2.6458 4.3779 2.6458 4.48398C2.6458 4.59007 2.68793 4.69181 2.76292 4.76683C2.83792 4.84184 2.93964 4.88398 3.04569 4.88398Z"
                fill="#7E7E7E"
              />
              <path
                d="M3.04569 6.58198H8.34433C8.45039 6.58198 8.55211 6.53984 8.6271 6.46483C8.7021 6.38981 8.74423 6.28807 8.74423 6.18198C8.74423 6.0759 8.7021 5.97415 8.6271 5.89914C8.55211 5.82413 8.45039 5.78198 8.34433 5.78198H3.04569C2.93964 5.78198 2.83792 5.82413 2.76292 5.89914C2.68793 5.97415 2.6458 6.0759 2.6458 6.18198C2.6458 6.28807 2.68793 6.38981 2.76292 6.46483C2.83792 6.53984 2.93964 6.58198 3.04569 6.58198Z"
                fill="#7E7E7E"
              />
              <path
                d="M8.34433 8.27998C8.45039 8.27998 8.55211 8.23784 8.6271 8.16282C8.7021 8.08781 8.74423 7.98607 8.74423 7.87998C8.74423 7.77389 8.7021 7.67215 8.6271 7.59714C8.55211 7.52212 8.45039 7.47998 8.34433 7.47998H3.04569C2.93964 7.47998 2.83792 7.52212 2.76292 7.59714C2.68793 7.67215 2.6458 7.77389 2.6458 7.87998C2.6458 7.98607 2.68793 8.08781 2.76292 8.16282C2.83792 8.23784 2.93964 8.27998 3.04569 8.27998H8.34433Z"
                fill="#7E7E7E"
              />
            </svg>
            {repository.node.licenseInfo.name}
          </div>
        ) : (
          ''
        )}
        <div className="flex flex-row gap-1 items-center justify-center">
          <svg
            width="12"
            height="13"
            viewBox="0 0 12 13"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.95281 1C5.67695 1.00098 4.44823 1.48244 3.51113 2.34858C2.57404 3.21472 1.99728 4.40204 1.89561 5.67429H0.409494C0.339371 5.67199 0.270002 5.68934 0.209209 5.72438C0.154498 5.75414 0.107477 5.79625 0.0718815 5.84737C0.0362858 5.89849 0.0130954 5.95721 0.00415201 6.01886C-0.00479135 6.08051 0.000758684 6.1434 0.0203614 6.20254C0.0399641 6.26167 0.0730794 6.31541 0.117077 6.3595L1.98574 8.22882C2.02294 8.26608 2.06712 8.29563 2.11575 8.3158C2.16438 8.33596 2.2165 8.34634 2.26914 8.34634C2.32178 8.34634 2.37391 8.33596 2.42254 8.3158C2.47117 8.29563 2.51534 8.26608 2.55255 8.22882L4.42121 6.3595C4.46521 6.31541 4.49832 6.26167 4.51792 6.20254C4.53753 6.1434 4.54308 6.08051 4.53413 6.01886C4.52519 5.95721 4.502 5.89849 4.4664 5.84737C4.43081 5.79625 4.38379 5.75414 4.32908 5.72438C4.27114 5.69129 4.20552 5.67401 4.13881 5.67429H2.69875C3.38373 0.310778 11.0346 0.645371 11.2249 6.075C11.2233 7.20793 10.7727 8.29401 9.97188 9.09512C9.17105 9.89623 8.08535 10.347 6.95281 10.3486C6.84657 10.3486 6.74469 10.3908 6.66957 10.4659C6.59444 10.5411 6.55224 10.643 6.55224 10.7493C6.55224 10.8556 6.59444 10.9575 6.66957 11.0326C6.74469 11.1078 6.84657 11.15 6.95281 11.15C13.6844 10.8715 13.6804 1.27649 6.95281 1ZM2.27816 7.37731L1.37687 6.47571H3.17944L2.27816 7.37731Z"
              fill="#7E7E7E"
            />
            <path
              d="M6.95282 3.6026C6.84658 3.6026 6.74469 3.64482 6.66957 3.71997C6.59445 3.79511 6.55225 3.89704 6.55225 4.00331V6.07498C6.55232 6.14525 6.57086 6.21427 6.60602 6.27511C6.64117 6.33594 6.6917 6.38646 6.75253 6.4216L9.34222 7.92627C9.43377 7.97417 9.54028 7.98484 9.6395 7.95605C9.73873 7.92725 9.82299 7.86122 9.8747 7.77174C9.9264 7.68226 9.94154 7.57625 9.91696 7.47587C9.89238 7.37549 9.82998 7.28848 9.74279 7.23304L7.35339 5.84458V4.00331C7.35339 3.89704 7.31118 3.79511 7.23606 3.71997C7.16094 3.64482 7.05905 3.6026 6.95282 3.6026Z"
              fill="#7E7E7E"
            />
          </svg>
          {`Updated ${formatDistanceToNow(repository.node.pushedAt)} ago`}
        </div>
      </div>
    </li>
  );
};

export default Repository;
